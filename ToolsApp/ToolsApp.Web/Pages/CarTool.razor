@page "/car-tool"

@using ToolsApp.Models.Cars
@using ToolsApp.Components.CarTool
@using ToolsApp.Services.Cars

@inject CarToolStoreService carToolStore

<ToolHeader HeaderText="Car Tool" />
<CarTable Cars="@cars" EditCarId="@editCarId"
	OnEditCar="editCar" OnDeleteCar="removeCar"
	OnSaveCar="replaceCar" OnCancelCar="cancelCar" />
<CarForm ButtonText="Add Car" OnSubmitCar="appendCar" />

@code {

	private IEnumerable<Car> cars {
		get {
			return carToolStore.Cars;
		}
	}

	private int editCarId {
		get {
			return carToolStore.EditCarId;
		}
	}

	private void editCar(int carId) {
		carToolStore.SetEditCarId(carId);
	}

	private void cancelCar() {
		carToolStore.SetEditCarId(-1);
	}

	private void appendCar(NewCar car)
	{
		carToolStore.AddCar(car);
	}

	private void replaceCar(Car car)
	{
		carToolStore.SaveCar(car);
	}

	private void removeCar(int carId)
	{
		carToolStore.DeleteCar(carId);
	}

}
